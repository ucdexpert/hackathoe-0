# social-summary

## Description
A comprehensive social media tracking and summarization skill that automatically logs all social media activities, generates summaries, and maintains a detailed Social_Log.md. Perfect for tracking LinkedIn posts, monitoring engagement, and generating periodic social media reports.

## Parameters
- `platform` (string, required): Social media platform (e.g., "linkedin", "twitter", "instagram", "facebook")
- `content` (string, required): Post content or summary
- `post_id` (string, optional): Platform-specific post ID
- `post_url` (string, optional): Direct URL to the post
- `status` (string, optional): Post status - "published", "scheduled", "draft", "failed" (default: "published")
- `engagement` (dict, optional): Engagement metrics (likes, comments, shares)
- `tags` (list, optional): Content tags or hashtags used

## Functionality
When invoked, this skill:

1. **Logs Social Activity**
   - Records platform, content, date
   - Stores post ID and URL
   - Tracks engagement metrics
   - Saves to Social_Log.md

2. **Generates Summaries**
   - Daily activity summaries
   - Weekly performance reports
   - Platform-specific analytics
   - Content performance tracking

3. **Maintains Social Log**
   - Chronological activity log
   - Markdown format for readability
   - Easy to query and analyze
   - Automatic backup

4. **Tracks Metrics**
   - Total posts per platform
   - Engagement rates
   - Posting frequency
   - Best performing content

## Social Log Format

Activities are logged to `Reports/Social_Log.md`:

```markdown
# Social Media Activity Log

**Last Updated:** 2026-02-18 10:30:00

---

## Recent Activity

| Date | Platform | Content | Status | Engagement |
|------|----------|---------|--------|------------|
| 2026-02-18 | LinkedIn | "Excited to announce..." | âœ… Published | 45 likes, 12 comments |
| 2026-02-17 | LinkedIn | "Industry insights..." | âœ… Published | 32 likes, 8 comments |

---

## Platform Summary

| Platform | Total Posts | Avg Likes | Avg Comments | Last Post |
|----------|-------------|-----------|--------------|-----------|
| LinkedIn | 15 | 38.5 | 10.2 | 2026-02-18 |

---

## Content Log

### 2026-02-18 - LinkedIn

**Post ID:** urn:li:share:1234567890
**URL:** https://linkedin.com/feed/update/1234567890
**Content:**
> Excited to announce our new product launch...

**Hashtags:** #innovation #business #launch
**Engagement:**
- Likes: 45
- Comments: 12
- Shares: 8

---

*Generated by social-summary skill*
```

## Implementation
```python
import os
import sys
import json
from datetime import datetime
from pathlib import Path
from typing import Dict, List, Optional


class SocialSummaryManager:
    """Manages social media activity logging and summaries."""
    
    def __init__(self, vault_root: Path = None):
        """Initialize social summary manager."""
        if vault_root is None:
            self.vault_root = Path(__file__).resolve().parent.parent
        else:
            self.vault_root = Path(vault_root)
        
        # Define paths
        self.reports_dir = self.vault_root / "Reports"
        self.social_log = self.reports_dir / "Social_Log.md"
        self.logs_dir = self.vault_root / "Logs"
        self.social_json_log = self.logs_dir / "social_activity.json"
        
        # Ensure directories exist
        self.reports_dir.mkdir(parents=True, exist_ok=True)
        self.logs_dir.mkdir(parents=True, exist_ok=True)
        
        # Initialize social log if doesn't exist
        if not self.social_log.exists():
            self._initialize_social_log()
    
    def _initialize_social_log(self):
        """Initialize Social_Log.md with header."""
        header = f"""# Social Media Activity Log

**Last Updated:** {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

---

## Recent Activity

| Date | Platform | Content | Status | Engagement |
|------|----------|---------|--------|------------|

---

## Platform Summary

| Platform | Total Posts | Avg Likes | Avg Comments | Last Post |
|----------|-------------|-----------|--------------|-----------|

---

## Content Log

---

*Generated by social-summary skill*
"""
        with open(self.social_log, 'w', encoding='utf-8') as f:
            f.write(header)
    
    def _load_activities(self) -> List[Dict]:
        """Load existing activities from JSON log."""
        if not self.social_json_log.exists():
            return []
        
        try:
            with open(self.social_json_log, 'r', encoding='utf-8') as f:
                return json.load(f)
        except Exception:
            return []
    
    def _save_activities(self, activities: List[Dict]):
        """Save activities to JSON log."""
        with open(self.social_json_log, 'w', encoding='utf-8') as f:
            json.dump(activities, f, indent=2, default=str)
    
    def log_post(self, platform: str, content: str, post_id: str = None,
                post_url: str = None, status: str = "published",
                engagement: Dict = None, tags: List[str] = None) -> Dict:
        """
        Log a social media post.
        
        Args:
            platform: Social media platform
            content: Post content
            post_id: Platform-specific post ID
            post_url: Direct URL to post
            status: Post status (published/scheduled/draft/failed)
            engagement: Engagement metrics dict
            tags: List of hashtags/tags
        
        Returns:
            Dict with logging result
        """
        timestamp = datetime.now()
        
        # Create activity record
        activity = {
            "timestamp": timestamp.isoformat(),
            "date": timestamp.strftime('%Y-%m-%d'),
            "platform": platform.lower(),
            "content": content[:500] + '...' if len(content) > 500 else content,
            "full_content": content,
            "post_id": post_id,
            "post_url": post_url,
            "status": status,
            "engagement": engagement or {},
            "tags": tags or [],
            "logged_at": timestamp.strftime('%Y-%m-%d %H:%M:%S')
        }
        
        # Load existing activities
        activities = self._load_activities()
        
        # Add new activity
        activities.append(activity)
        
        # Save to JSON log
        self._save_activities(activities)
        
        # Update markdown log
        self._update_markdown_log(activities)
        
        return {
            "success": True,
            "message": f"Social activity logged: {platform}",
            "activity": {
                "platform": platform,
                "date": activity["date"],
                "status": status
            }
        }
    
    def _update_markdown_log(self, activities: List[Dict]):
        """Update the markdown Social_Log.md file."""
        # Sort activities by date (newest first)
        sorted_activities = sorted(activities, key=lambda x: x.get('timestamp', ''), reverse=True)
        
        # Generate recent activity table
        recent_rows = ""
        for activity in sorted_activities[:20]:  # Show last 20
            date = activity.get('date', 'Unknown')
            platform = activity.get('platform', 'Unknown').title()
            content = activity.get('content', '')[:50] + '...' if len(activity.get('content', '')) > 50 else activity.get('content', '')
            status = activity.get('status', 'unknown')
            status_icon = "âœ…" if status == "published" else "â³" if status == "scheduled" else "ðŸ“" if status == "draft" else "âŒ"
            
            # Format engagement
            engagement = activity.get('engagement', {})
            engagement_str = ""
            if engagement:
                parts = []
                if 'likes' in engagement:
                    parts.append(f"{engagement['likes']} likes")
                if 'comments' in engagement:
                    parts.append(f"{engagement['comments']} comments")
                if 'shares' in engagement:
                    parts.append(f"{engagement['shares']} shares")
                engagement_str = ", ".join(parts)
            
            recent_rows += f"| {date} | {platform} | {content} | {status_icon} {status.title()} | {engagement_str} |\n"
        
        # Generate platform summary
        platform_stats = {}
        for activity in sorted_activities:
            if activity.get('status') != 'published':
                continue
            
            platform = activity.get('platform', 'unknown')
            if platform not in platform_stats:
                platform_stats[platform] = {
                    "posts": 0,
                    "total_likes": 0,
                    "total_comments": 0,
                    "total_shares": 0,
                    "last_post": activity.get('date', 'Unknown')
                }
            
            platform_stats[platform]["posts"] += 1
            engagement = activity.get('engagement', {})
            platform_stats[platform]["total_likes"] += engagement.get('likes', 0)
            platform_stats[platform]["total_comments"] += engagement.get('comments', 0)
            platform_stats[platform]["total_shares"] += engagement.get('shares', 0)
            platform_stats[platform]["last_post"] = activity.get('date', 'Unknown')
        
        # Generate summary table
        summary_rows = ""
        for platform, stats in sorted(platform_stats.items()):
            avg_likes = stats["total_likes"] / stats["posts"] if stats["posts"] > 0 else 0
            avg_comments = stats["total_comments"] / stats["posts"] if stats["posts"] > 0 else 0
            summary_rows += f"| {platform.title()} | {stats['posts']} | {avg_likes:.1f} | {avg_comments:.1f} | {stats['last_post']} |\n"
        
        # Generate content log
        content_log = ""
        for activity in sorted_activities[:50]:  # Last 50 posts
            if activity.get('status') != 'published':
                continue
            
            date = activity.get('date', 'Unknown')
            platform = activity.get('platform', 'Unknown').title()
            content = activity.get('full_content', activity.get('content', ''))
            post_id = activity.get('post_id', 'N/A')
            post_url = activity.get('post_url', 'N/A')
            tags = activity.get('tags', [])
            engagement = activity.get('engagement', {})
            
            content_log += f"\n### {date} - {platform}\n\n"
            if post_id != 'N/A':
                content_log += f"**Post ID:** {post_id}\n"
            if post_url != 'N/A':
                content_log += f"**URL:** {post_url}\n"
            content_log += f"**Content:**\n> {content}\n\n"
            
            if tags:
                content_log += f"**Hashtags:** {' '.join(tags)}\n\n"
            
            if engagement:
                content_log += "**Engagement:**\n"
                if 'likes' in engagement:
                    content_log += f"- Likes: {engagement['likes']}\n"
                if 'comments' in engagement:
                    content_log += f"- Comments: {engagement['comments']}\n"
                if 'shares' in engagement:
                    content_log += f"- Shares: {engagement['shares']}\n"
            
            content_log += "\n---\n"
        
        # Build complete log
        log_content = f"""# Social Media Activity Log

**Last Updated:** {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}

---

## Recent Activity

| Date | Platform | Content | Status | Engagement |
|------|----------|---------|--------|------------|
{recent_rows}
---

## Platform Summary

| Platform | Total Posts | Avg Likes | Avg Comments | Last Post |
|----------|-------------|-----------|--------------|-----------|
{summary_rows if summary_rows else '| - | - | - | - | - |'}
---

## Content Log
{content_log if content_log else '\n*No posts logged yet.*\n'}
*Generated by social-summary skill*
"""
        
        # Write to file
        with open(self.social_log, 'w', encoding='utf-8') as f:
            f.write(log_content)
    
    def get_summary(self, days: int = 7, platform: str = None) -> Dict:
        """
        Get social media summary.
        
        Args:
            days: Number of days to summarize
            platform: Filter by specific platform
        
        Returns:
            Dict with summary statistics
        """
        from datetime import timedelta
        
        cutoff = datetime.now() - timedelta(days=days)
        activities = self._load_activities()
        
        # Filter activities
        filtered = []
        for activity in activities:
            try:
                activity_date = datetime.fromisoformat(activity.get('timestamp', ''))
                if activity_date >= cutoff:
                    if platform is None or activity.get('platform', '').lower() == platform.lower():
                        filtered.append(activity)
            except Exception:
                continue
        
        # Calculate statistics
        stats = {
            "total_posts": len(filtered),
            "by_platform": {},
            "by_status": {},
            "total_engagement": {
                "likes": 0,
                "comments": 0,
                "shares": 0
            },
            "period_days": days
        }
        
        for activity in filtered:
            platform = activity.get('platform', 'unknown')
            status = activity.get('status', 'unknown')
            engagement = activity.get('engagement', {})
            
            # Count by platform
            stats["by_platform"][platform] = stats["by_platform"].get(platform, 0) + 1
            
            # Count by status
            stats["by_status"][status] = stats["by_status"].get(status, 0) + 1
            
            # Sum engagement
            stats["total_engagement"]["likes"] += engagement.get('likes', 0)
            stats["total_engagement"]["comments"] += engagement.get('comments', 0)
            stats["total_engagement"]["shares"] += engagement.get('shares', 0)
        
        return stats
    
    def get_recent_posts(self, limit: int = 10, platform: str = None) -> List[Dict]:
        """Get recent posts."""
        activities = self._load_activities()
        
        # Sort by timestamp (newest first)
        sorted_activities = sorted(activities, key=lambda x: x.get('timestamp', ''), reverse=True)
        
        # Filter by platform if specified
        if platform:
            sorted_activities = [a for a in sorted_activities if a.get('platform', '').lower() == platform.lower()]
        
        return sorted_activities[:limit]


# ============================================================================
# Skill Entry Point
# ============================================================================

def social_summary_skill(platform: str, content: str, post_id: str = None,
                        post_url: str = None, status: str = "published",
                        engagement: Dict = None, tags: List[str] = None) -> Dict:
    """
    Main entry point for social-summary skill.
    
    Args:
        platform: Social media platform
        content: Post content
        post_id: Platform-specific post ID
        post_url: Direct URL to post
        status: Post status
        engagement: Engagement metrics
        tags: Hashtags/tags
    
    Returns:
        Result dictionary
    """
    manager = SocialSummaryManager()
    return manager.log_post(
        platform=platform,
        content=content,
        post_id=post_id,
        post_url=post_url,
        status=status,
        engagement=engagement,
        tags=tags
    )


# Example usage
if __name__ == "__main__":
    # Log a LinkedIn post
    result = social_summary_skill(
        platform="linkedin",
        content="Excited to announce our new product launch! #innovation",
        post_id="urn:li:share:1234567890",
        post_url="https://linkedin.com/feed/update/1234567890",
        engagement={"likes": 45, "comments": 12, "shares": 8},
        tags=["#innovation", "#business", "#launch"]
    )
    print(json.dumps(result, indent=2))
```

## Usage Examples

### Log LinkedIn Post
```python
social_summary_skill(
    platform="linkedin",
    content="Excited to share our latest innovation!",
    post_id="urn:li:share:1234567890",
    engagement={"likes": 45, "comments": 12}
)
```

### Log Multiple Platforms
```python
# LinkedIn
social_summary_skill(
    platform="linkedin",
    content="Professional update",
    engagement={"likes": 50}
)

# Twitter
social_summary_skill(
    platform="twitter",
    content="Quick update thread",
    engagement={"likes": 120, "retweets": 45}
)
```

### Get Summary
```python
from social_summary import SocialSummaryManager

manager = SocialSummaryManager()
summary = manager.get_summary(days=7)
```

## Integration

### Automatic Logging After Post
```python
# Post to LinkedIn
result = post_linkedin(content="...")

# Log the activity
if result['success']:
    social_summary_skill(
        platform="linkedin",
        content=content,
        post_id=result.get('post_id'),
        post_url=result.get('post_url')
    )
```

## Best Practices

1. **Log immediately** - Log posts right after publishing
2. **Include engagement** - Track metrics for analytics
3. **Use tags** - Helps with content categorization
4. **Review weekly** - Check Social_Log.md for insights
5. **Backup regularly** - Archive old logs periodically
